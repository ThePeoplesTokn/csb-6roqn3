(this["webpackJsonpbnb-bank"]=this["webpackJsonpbnb-bank"]||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"contractAddress":"0xf3B1f725D15953224065302aDC3Faa4d6c4D0540","abi":[{"inputs":[{"internalType":"contract Token","name":"_token","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"LogDeposit","type":"event"},{"inputs":[],"name":"deposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"token","outputs":[{"internalType":"contract Token","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawWithInterest","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"}],"networks":{"97":{"events":{},"links":{},"address":"0xf3B1f725D15953224065302aDC3Faa4d6c4D0540"}}}')},255:function(e,t,n){},258:function(e,t,n){},275:function(e,t){},279:function(e,t){},283:function(e,t){},284:function(e,t){},310:function(e,t){},312:function(e,t){},321:function(e,t){},323:function(e,t){},333:function(e,t){},335:function(e,t){},350:function(e,t){},378:function(e,t){},379:function(e,t){},453:function(e,t){},455:function(e,t){},462:function(e,t){},463:function(e,t){},481:function(e,t){},490:function(e,t){},497:function(e,t){},560:function(e,t){},589:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(72),i=n.n(c),r=(n(255),n(20)),o=n.n(r),u=n(73),l=n(5),d=n(7),h=n(11),p=n(10),b=n(598),m=n(596),f=n(597),j=n(599),w=(n(257),n(258),n(243)),k=n.n(w),x=n(104),O=n(83),v=n(6),y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleClick=function(){var e=a.state.transactionValue;if(""===e||0===e)a.setState({msg:"Please enter an amount"});else if(e){a.setState({msg:""}),a.props.onClick(e)&&a.setState({transactionValue:""})}},a.handleChange=function(e){var t=e.target.value;(""===t||/^\d+(\.\d{0,2})?$/.test(t))&&a.setState({transactionValue:e.target.value})},a.state={transactionValue:""},a.wrapperRef=s.a.createRef(),a.handleClickOutside=a.handleClickOutside.bind(Object(O.a)(a)),a}return Object(d.a)(n,[{key:"UNSAFE_componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"UNSAFE_componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.current.contains(e.target)&&this.setState({msg:""})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"transaction-input",ref:this.wrapperRef,children:[Object(v.jsx)("p",{className:"transaction-description",children:"How much do you what to deposit?"}),Object(v.jsxs)("p",{className:"transaction-description",children:["(min. amount is ",Object(v.jsx)("span",{className:"numeric-field",children:"0.01"}),")"]}),Object(v.jsx)("input",{className:"transaction-input-field",onChange:this.handleChange,type:"text",value:this.state.transactionValue,placeholder:"amount..."}),Object(v.jsx)("button",{className:"transaction-button",onClick:this.handleClick,children:"Confirm"}),Object(v.jsx)("p",{className:"error-message",children:this.state.msg})]})}}]),n}(a.Component),C=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleClick=function(){0===a.props.balance?a.setState({msg:"Insuffient funds"}):(a.props.onClick(a.state.option),a.setState({msg:""}))},a.handleChange=function(){a.state.option?a.setState({option:!1}):a.setState({option:!0})},a.deselect=function(){a.state.option&&a.handleChange()},a.state={option:!1,msg:""},a.wrapperRef=s.a.createRef(),a.handleClickOutside=a.handleClickOutside.bind(Object(O.a)(a)),a}return Object(d.a)(n,[{key:"UNSAFE_componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"UNSAFE_componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.current.contains(e.target)&&this.setState({msg:""})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"transaction-input",ref:this.wrapperRef,children:[Object(v.jsx)("p",{className:"transaction-description",children:"Withdraw all funds from your account?"}),Object(v.jsx)("input",{type:"radio",id:"add-token",onClick:this.deselect,onChange:this.handleChange,checked:this.state.option,value:"receive token interest"}),Object(v.jsx)("label",{htmlFor:"add-token",children:"\xa0 add interest "}),Object(v.jsx)("button",{className:"transaction-button",onClick:this.handleClick,children:"Confirm"}),Object(v.jsx)("div",{className:"error-message",children:this.state.msg})]})}}]),n}(a.Component),g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).connect=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.ethereum.isConnected()&&a.loadBlockChainData()}catch(t){}case 1:case"end":return e.stop()}}),e)}))),a.loadBlockChainData=Object(u.a)(o.a.mark((function e(){var t,n,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=38;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return e.next=5,new k.a(window.ethereum);case 5:return window.web3=e.sent,a.setState({web3:window.web3}),e.next=9,window.web3.eth.net.getId();case 9:if(t=e.sent,n=x.networks[t]){e.next=26;break}return e.prev=12,e.next=15,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x61",chainName:"Smart Chain - Testnet",rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545"],nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},blockExplorerUrls:["https://testnet.bscscan.com"]}]});case 15:return e.next=17,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x61"}]});case 17:return e.next=19,window.web3.eth.net.getId();case 19:t=e.sent,n=x.networks[t],e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),console.log("Please change network with MetaMask");case 26:if(!n){e.next=35;break}return s=n.address,a.setState({bankAddress:s}),a.setState({bank:new window.web3.eth.Contract(x.abi,n&&s)}),e.next=32,a.state.web3.eth.getAccounts();case 32:c=e.sent,a.setState({account:c[0]}),a.updateBalance();case 35:a.setState({connected:!0}),e.next=39;break;case 38:console.log("Please install MetaMask to continue");case 39:case"end":return e.stop()}}),e,null,[[12,23]])}))),a.deposit=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s,c,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,s=n.web3,c=n.bank,i=n.account,r=s.utils.toWei(t,"ether"),e.next=4,c.methods.deposit().send({from:i,value:r}).catch((function(e){return!1}));case 4:return a.updateBalance(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.withdraw=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,s=n.bank,c=n.account,t){e.next=6;break}return e.next=4,s.methods.withdraw().send({from:c}).catch((function(e){return!1}));case 4:e.next=8;break;case 6:return e.next=8,s.methods.withdrawWithInterest().send({from:c}).catch((function(e){return!1}));case 8:return a.updateBalance(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateBalance=Object(u.a)(o.a.mark((function e(){var t,n,s,c,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.web3,s=t.bank,c=t.account,e.t0=n.utils,e.next=4,n.eth.getBalance(c);case 4:return e.t1=e.sent,i=e.t0.fromWei.call(e.t0,e.t1,"ether"),i=Math.round(100*i)/100,a.setState({walletBalance:i}),e.next=10,s.methods.getBalance().call({from:c});case 10:r=e.sent,r=n.utils.fromWei(r,"ether"),r=Math.round(100*r)/100,a.setState({bankBalance:r});case 14:case"end":return e.stop()}}),e)}))),a.state={web3:"",account:"",walletBalance:0,bankBalance:0,bankAddress:null,bank:null,token:null,network:null,connected:!1},a}return Object(d.a)(n,[{key:"UNSAFE_componentDidMount",value:function(){this.connect()}},{key:"render",value:function(){var e;return e=this.state.connected?""===this.state.web3?Object(v.jsx)("div",{className:"main",children:Object(v.jsx)("p",{id:"change-network",children:"To continue, please select the Testnet network in MetaMask"})}):Object(v.jsxs)("div",{className:"main",children:[Object(v.jsxs)("div",{id:"address",children:[Object(v.jsx)("p",{children:"Your Address: "}),Object(v.jsx)("p",{id:"address-hash",className:"numeric-field",children:this.state.account})]}),Object(v.jsx)("div",{id:"balance",children:Object(v.jsxs)("p",{children:["Bank balance:"," ",Object(v.jsxs)("span",{className:"numeric-field",children:[this.state.bankBalance," BNB"]})," "]})}),Object(v.jsx)("div",{id:"transactions",children:Object(v.jsx)(b.a.Container,{id:"transaction-selection",defaultActiveKey:"first",children:Object(v.jsxs)(m.a,{className:"row",children:[Object(v.jsx)(f.a,{className:"col",children:Object(v.jsxs)(j.a,{variant:"pills",className:"flex-column",children:[Object(v.jsx)(j.a.Item,{children:Object(v.jsx)(j.a.Link,{className:"tabs",eventKey:"first",children:"Deposit"})}),Object(v.jsx)(j.a.Item,{children:Object(v.jsx)(j.a.Link,{className:"tabs",eventKey:"second",children:"Withdraw"})})]})}),Object(v.jsx)(f.a,{className:"col",children:Object(v.jsxs)(b.a.Content,{className:"tab-content",children:[Object(v.jsx)(b.a.Pane,{eventKey:"first",children:Object(v.jsx)(y,{className:"top",transactionType:"Deposit",onClick:this.deposit})}),Object(v.jsx)(b.a.Pane,{eventKey:"second",children:Object(v.jsx)(C,{className:"top",transactionType:"Withdraw",onClick:this.withdraw,balance:this.state.bankBalance})})]})})]})})})]}):Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("p",{id:"login",children:"Connect with MetaMask to continue."}),Object(v.jsx)("button",{id:"connect-button",onClick:this.loadBlockChainData,children:"Connect"}),Object(v.jsxs)("p",{id:"install-link",children:["Don't have MetaMask installed? Get it"," ",Object(v.jsx)("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})]}),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("div",{className:"app-header",children:[Object(v.jsx)("img",{className:"logo",alt:"Palm tree logo",src:"https://thepeoplestokn.github.io/csb-6roqn3/palm_tree_medium.png"}),Object(v.jsx)("h1",{id:"welcome",children:"Welcome to BNB Bank"})]}),e]})}}]),n}(a.Component),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,600)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(g,{})}),document.getElementById("root")),N()}},[[589,1,2]]]);
//# sourceMappingURL=main.5f643e83.chunk.js.map